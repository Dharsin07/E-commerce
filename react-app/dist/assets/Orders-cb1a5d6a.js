import{a as o,j as e,f as l}from"./index-02495058.js";import{r as c}from"./vendor-9fe24c3f.js";import{u as d}from"./router-4197aa40.js";import"./ui-9e04399f.js";import"./supabase-f3f4aacd.js";const j=()=>{const a=d(),{user:r}=o(),[i,n]=c.useState([]);return c.useEffect(()=>{if(r)try{const s=JSON.parse(localStorage.getItem(`orders_${r.email}`)||"[]");n(s)}catch(s){console.error("Failed to load orders",s),n([])}else n([])},[r]),r?e.jsx("div",{className:"section",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h2",{className:"section-title",children:"My Orders"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>a("/"),children:"Back Home"})]}),i.length===0?e.jsx("p",{style:{marginTop:"1rem",color:"var(--text-gray)"},children:"You have no orders yet."}):e.jsx("div",{className:"orders-list",style:{marginTop:"1rem"},children:i.map(s=>e.jsxs("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[e.jsxs("h3",{children:["Order #",s.id]}),e.jsx("span",{className:`status-badge ${s.status.toLowerCase()}`,children:s.status})]}),e.jsxs("p",{style:{color:"var(--text-gray)",marginBottom:"0.5rem"},children:[new Date(s.date).toLocaleDateString()," at ",new Date(s.date).toLocaleTimeString()]}),e.jsxs("div",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Items:"}),e.jsx("ul",{style:{marginTop:"0.25rem"},children:s.items.map(t=>e.jsxs("li",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{children:[t.name," (x",t.quantity,")"]}),e.jsx("span",{children:l(t.price*t.quantity)})]},t.productId))})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("strong",{children:["Total: ",l(s.total)]}),e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>a(`/track-order?id=${s.id}`),children:"Track Order"})]})]},s.id))})]})}):e.jsx("div",{className:"section",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h2",{className:"section-title",children:"My Orders"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>a("/"),children:"Back Home"})]}),e.jsx("p",{style:{marginTop:"1rem",color:"var(--text-gray)"},children:"Please log in to view your orders."})]})})};export{j as default};
