var R=(d,h,u)=>new Promise((w,j)=>{var p=l=>{try{o(u.next(l))}catch(g){j(g)}},v=l=>{try{o(u.throw(l))}catch(g){j(g)}},o=l=>l.done?w(l.value):Promise.resolve(l.value).then(p,v);o((u=u.apply(d,h)).next())});import{u as Z,j as e,a as H,s as A}from"./index-02495058.js";import{r as t}from"./vendor-9fe24c3f.js";import{Q as W}from"./ui-9e04399f.js";import{u as D,L as i,N}from"./router-4197aa40.js";import"./supabase-f3f4aacd.js";const O=()=>{const{isDarkMode:d,toggleTheme:h}=Z();return e.jsx("button",{className:"dark-mode-toggle",onClick:h,"aria-label":"Toggle dark mode",title:d?"Switch to light mode":"Switch to dark mode",children:d?"â˜€ï¸":"ðŸŒ™"})},z=({cartCount:d=0,wishlistCount:h=0,onCartToggle:u=()=>{},onWishlistToggle:w=()=>{},onAdminToggle:j=()=>{},searchValue:p="",onSearchChange:v=()=>{},searchSuggestions:o=[]})=>{const{user:l,logout:g,isAuthenticated:y,isAdmin:I}=H(),[c,P]=t.useState(!1),f=t.useRef(null);t.useEffect(()=>{c&&f.current&&f.current.focus()},[c]),t.useEffect(()=>{const n=s=>{if(!c)return;const x=s.target;if(x&&f.current&&!f.current.contains(x)){const k=document.getElementById("header-search-btn");if(k&&k.contains(x))return;P(!1)}};return document.addEventListener("click",n),()=>document.removeEventListener("click",n)},[c]);const M=D(),E=n=>{n.stopPropagation(),P(s=>!s)},S=n=>{n.preventDefault(),window.location.pathname==="/"?A("contact"):(M("/"),setTimeout(()=>A("contact"),100))},T=()=>R(void 0,null,function*(){yield g(),W.success("Logged out successfully"),M("/login")}),[m,a]=t.useState(!1),[b,r]=t.useState(!1),C=t.useRef(null),L=t.useRef(null);return t.useEffect(()=>{const n=s=>{m&&C.current&&!C.current.contains(s.target)&&a(!1),b&&L.current&&!L.current.contains(s.target)&&r(!1)};return document.addEventListener("click",n),()=>document.removeEventListener("click",n)},[m,b]),e.jsx("header",{className:"header",role:"banner",children:e.jsxs("nav",{className:"nav container",role:"navigation","aria-label":"Main navigation",children:[e.jsx(i,{to:"/",className:"logo","aria-label":"Luxe Furniture Homepage",children:"LUXE"}),e.jsxs("ul",{className:"nav-links",children:[e.jsx("li",{children:e.jsx(N,{to:"/",end:!0,children:"Home"})}),e.jsx("li",{children:e.jsx(N,{to:"/shop",children:"Shop"})}),e.jsx("li",{children:e.jsx(N,{to:"/collections",children:"Collections"})}),e.jsx("li",{children:e.jsx(N,{to:"/review",children:"Reviews"})}),e.jsx("li",{children:e.jsx("a",{href:"#contact",onClick:S,children:"Contact"})}),y()&&I()&&e.jsx("li",{children:e.jsx("button",{className:"nav-link admin-nav-link",onClick:j,children:"Admin Panel"})})]}),e.jsxs("div",{className:"nav-actions",children:[e.jsx(O,{}),e.jsxs("div",{className:`header-search ${c?"open":""}`,children:[e.jsx("button",{id:"header-search-btn",className:"nav-icon",onClick:E,"aria-label":c?"Close search":"Open search",children:"ðŸ”"}),e.jsx("input",{ref:f,id:"header-search-input",className:"header-search-input",type:"search",placeholder:"Search products, categories...",value:String(p!=null?p:""),onChange:n=>v(n.target.value),"aria-label":"Search products",onClick:n=>n.stopPropagation()}),c&&Array.isArray(o)&&o.length>0&&e.jsx("ul",{className:"search-suggestions",role:"listbox",children:o.slice(0,6).map(n=>{var s,x;return e.jsxs("li",{className:"suggestion-item",onClick:()=>{P(!1),v(""),M(`/product/${n.id}`)},children:[((s=n.images)==null?void 0:s[0])&&e.jsx("img",{src:n.images[0],alt:n.name,onError:k=>{k.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y0ZjRmNCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiPk5vIEltYWdlPC90ZXh0Pjwvc3ZnPg==",k.target.onerror=null}}),e.jsxs("div",{className:"suggestion-meta",children:[e.jsx("div",{className:"suggestion-name",children:n.name}),e.jsx("div",{className:"suggestion-cat",children:n.category.replace("-"," ")}),e.jsxs("div",{className:"suggestion-price",children:["$",(x=n.price)==null?void 0:x.toFixed(2)]})]})]},n.id)})})]}),e.jsxs("button",{className:"nav-icon","data-target":"wishlist",onClick:w,"aria-label":"View wishlist",children:["â¤ï¸",h>0&&e.jsx("span",{className:"cart-count",children:h})]}),e.jsxs("button",{className:"nav-icon","data-target":"cart",onClick:u,"aria-label":"View shopping cart",children:["ðŸ›’",e.jsx("span",{className:"cart-count",children:d})]}),e.jsxs("div",{className:"nav-dropdown",ref:L,children:[e.jsx("button",{className:"nav-icon","aria-haspopup":"true","aria-expanded":b,onClick:n=>{n.stopPropagation(),r(s=>!s),a(!1)},title:"Shopping",children:"ðŸ“¬"}),b&&e.jsxs("ul",{className:"dropdown-menu",role:"menu",children:[e.jsx("li",{children:e.jsx(i,{to:"/recently-viewed",onClick:()=>r(!1),children:"Recently Viewed"})}),e.jsx("li",{children:e.jsx(i,{to:"/cart",onClick:()=>r(!1),children:"My Cart"})}),e.jsx("li",{children:e.jsx(i,{to:"/track-order",onClick:()=>r(!1),children:"Track Order"})}),e.jsx("li",{children:e.jsx(i,{to:"/returns",onClick:()=>r(!1),children:"Returns & Refunds"})}),e.jsx("li",{children:e.jsx(i,{to:"/order-history",onClick:()=>r(!1),children:"Order History"})})]})]}),y()?e.jsxs("div",{className:"nav-dropdown",ref:C,children:[e.jsx("button",{className:"nav-icon","aria-haspopup":"true","aria-expanded":m,onClick:n=>{n.stopPropagation(),a(s=>!s),r(!1)},title:`Logged in as ${l==null?void 0:l.name}`,children:"ðŸ‘¤"}),m&&e.jsxs("ul",{className:"dropdown-menu",role:"menu",children:[e.jsx("li",{children:e.jsx(i,{to:"/profile",onClick:()=>a(!1),children:"My Profile"})}),e.jsx("li",{children:e.jsx(i,{to:"/edit-profile",onClick:()=>a(!1),children:"Edit Profile"})}),e.jsx("li",{children:e.jsx(i,{to:"/orders",onClick:()=>a(!1),children:"My Orders"})}),e.jsx("li",{children:e.jsx(i,{to:"/wishlist",onClick:()=>a(!1),children:"Wishlist"})}),e.jsx("li",{children:e.jsx(i,{to:"/addresses",onClick:()=>a(!1),children:"Saved Addresses"})}),e.jsx("li",{children:e.jsx(i,{to:"/payments",onClick:()=>a(!1),children:"Payment Methods"})}),I()&&e.jsx("li",{children:e.jsx(i,{to:"/dashboard",onClick:()=>a(!1),children:"Admin Dashboard"})}),e.jsx("li",{children:e.jsx("hr",{style:{margin:"0.5rem 0",border:"none",borderTop:"1px solid var(--medium-gray)"}})}),e.jsx("li",{children:e.jsx("button",{onClick:T,style:{width:"100%",textAlign:"left",background:"none",border:"none",padding:"0.6rem 1rem",cursor:"pointer",color:"var(--charcoal)"},children:"Logout"})})]})]}):e.jsxs("div",{className:"nav-dropdown",ref:C,children:[e.jsx("button",{className:"nav-icon","aria-haspopup":"true","aria-expanded":m,onClick:n=>{n.stopPropagation(),a(s=>!s),r(!1)},title:"Account",children:"ðŸ”"}),m&&e.jsxs("ul",{className:"dropdown-menu",role:"menu",children:[e.jsx("li",{children:e.jsx(i,{to:"/login",onClick:()=>a(!1),children:"Login"})}),e.jsx("li",{children:e.jsx(i,{to:"/signup",onClick:()=>a(!1),children:"Sign Up"})})]})]}),y()&&I()&&e.jsx("button",{className:"nav-icon admin-icon",onClick:j,"aria-label":"Admin panel",title:"Admin Panel",children:"âš™ï¸"})]}),e.jsxs("button",{className:"mobile-menu",onClick:()=>W.info("Mobile menu feature coming soon!"),"aria-label":"Toggle mobile menu",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]})]})})};export{z as default};
